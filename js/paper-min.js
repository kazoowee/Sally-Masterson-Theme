var Utils={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return Utils.Android()||Utils.BlackBerry()||Utils.iOS()||Utils.Opera()||Utils.Windows()},randomInRange:function(e,n){return Math.floor(Math.random()*(n-e+1))+e}},$borders=[].slice.call(document.querySelectorAll(".border-inner"),0),wrapperRombo=document.getElementById("wrapper"),control=document.getElementById("control"),colors=["#df3891","#fff78b","#692286","#c4a66b","#ed95c0","#6ac1b8"],nRombo=20,timer=.8,setObj=function e(){var n=document.documentElement.clientWidth/window.innerWidth,o=window.innerHeight*n;Utils.iOS()&&o>window.innerWidth&&(document.querySelector(".Main").style.height=o+"px",document.querySelector(".Main").style.minHeight=o+"px"),TweenMax.set(document.querySelectorAll(".border-inner")[0],{y:-32}),TweenMax.set(document.querySelectorAll(".border-inner")[1],{y:32}),TweenMax.set(document.querySelectorAll(".border-inner")[2],{x:-32}),TweenMax.set(document.querySelectorAll(".border-inner")[3],{x:32})},border=function e(){var n=new TimelineMax;return n.to($borders,1.8,{x:0,y:0,force3D:!0,ease:Power1.easeOut,onComplete:function(){document.body.classList.remove("overflow")}}),n},romboInit=function e(){for(var n=0;n<nRombo;n++){var o=document.createElement("div"),t=document.createElement("div");wrapperRombo.appendChild(o),o.className="box",TweenMax.set(".box",{perspective:600,transformOrigin:"50% 50%"}),document.querySelectorAll(".box")[n].appendChild(t),t.className="rombo",TweenMax.set(".rombo",{transformStyle:"preserve-3d"}),Utils.any()?TweenMax.set(document.querySelectorAll(".rombo")[n],{backgroundColor:colors[Math.floor(Math.random()*colors.length)],top:Utils.randomInRange(-40,40),left:Utils.randomInRange(-40,40),y:0,scale:0,opacity:0,transformOrigin:"50% 50%",rotationY:Utils.randomInRange(-720,720),rotation:Utils.randomInRange(-720,720)}):TweenMax.set(document.querySelectorAll(".rombo")[n],{backgroundColor:colors[Math.floor(Math.random()*colors.length)],top:Utils.randomInRange(-340,340),left:Utils.randomInRange(-340,340),y:-100,scale:0,opacity:0,transformOrigin:"50% 50%",rotationY:Utils.randomInRange(-720,720),rotation:Utils.randomInRange(-320,320)})}},romboAnimation=function e(){var n=[].slice.call(document.querySelectorAll(".rombo"),0),o=new TimelineMax;return o.staggerTo(n,1.2,{y:0,scale:1,opacity:1,rotationY:0,rotation:"+=240",force3D:!0,ease:Power2.easeOut},.08),o},init=function e(){function n(e){t.play(),t.timeScale(timer),e.textContent="REVERSE"}function o(e){t.reverse(),t.timeScale(5*timer),e.textContent="PLAY"}setObj(),romboInit();var t=new TimelineMax({delay:.4});t.add(border(),"scene1").add(romboAnimation(),"-=1.8","scene2"),t.timeScale(timer),control.onclick=function(){return t.reversed()?n(this):o(this),!1}};window.onload=init;